<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kangcenet.tms.admin.dao.JobInfoDao">

    <resultMap id="JobInfo" type="com.kangcenet.tms.admin.core.model.JobInfo">
        <result column="id" property="id"/>
        <result column="jobGroup" property="jobGroup"/>
        <result column="jobCron" property="jobCron"/>
        <result column="jobDesc" property="jobDesc"/>
        <result column="executorHandler" property="executorHandler"/>
        <result column="address" property="address"/>
        <result column="command" property="command"/>
    </resultMap>

    <!--<sql id="Base_Column_List">-->
    <!--t.id,-->
    <!--t.jobGroup,-->
    <!--t.jobCron,-->
    <!--t.jobDesc,-->
    <!--t.executorHandler,-->
    <!--t.address,-->
    <!--t.author,-->
    <!--t.command-->
    <!--</sql>-->

    <!--<select id="pageList" parameterType="java.util.HashMap" resultMap="XxlJobInfo">-->
    <!--SELECT-->
    <!--<include refid="Base_Column_List"/>-->
    <!--FROM job_qrtz_trigger_info AS t-->
    <!--<trim prefix="WHERE" prefixOverrides="AND | OR">-->
    <!--<if test="jobGroup gt 0">-->
    <!--AND t.job_group = #{jobGroup}-->
    <!--</if>-->
    <!--<if test="jobDesc != null and jobDesc != ''">-->
    <!--AND t.job_desc like CONCAT(CONCAT('%', #{jobDesc}), '%')-->
    <!--</if>-->
    <!--<if test="executorHandler != null and executorHandler != ''">-->
    <!--AND t.executor_handler like CONCAT(CONCAT('%', #{executorHandler}), '%')-->
    <!--</if>-->
    <!--</trim>-->
    <!--ORDER BY id DESC-->
    <!--LIMIT #{offset}, #{pagesize}-->
    <!--</select>-->

    <!--<select id="pageListCount" parameterType="java.util.HashMap" resultType="int">-->
    <!--SELECT count(1)-->
    <!--FROM job_qrtz_trigger_info AS t-->
    <!--<trim prefix="WHERE" prefixOverrides="AND | OR">-->
    <!--<if test="jobGroup gt 0">-->
    <!--AND t.job_group = #{jobGroup}-->
    <!--</if>-->
    <!--<if test="jobDesc != null and jobDesc != ''">-->
    <!--AND t.job_desc like CONCAT(CONCAT('%', #{jobDesc}), '%')-->
    <!--</if>-->
    <!--<if test="executorHandler != null and executorHandler != ''">-->
    <!--AND t.executor_handler like CONCAT(CONCAT('%', #{executorHandler}), '%')-->
    <!--</if>-->
    <!--</trim>-->
    <!--</select>-->

    <insert id="save" parameterType="com.kangcenet.tms.admin.core.model.JobInfo" useGeneratedKeys="true"
            keyProperty="id">
        INSERT INTO job_qrtz_trigger_info (jobGroup, jobCron, jobDesc, executorHandler, address, command)
        VALUES (#{jobGroup}, #{jobCron}, #{jobDesc}, #{executorHandler}, #{address}, #{command});
    </insert>

    <select id="loadById" parameterType="java.util.HashMap" resultMap="JobInfo">
        SELECT
        <include refid="Base_Column_List"/>
        FROM job_qrtz_trigger_info AS t
        WHERE t.id = #{id}
    </select>

    <sql id="Base_Column_List">
        t.id,
        t.jobGroup,
        t.jobCron,
        t.jobDesc,
        t.executorHandler,
        t.address,
        t.author,
        t.command
    </sql>

    <!--<update id="update" parameterType="com.xxl.job.admin.core.model.XxlJobInfo">-->
    <!--UPDATE job_qrtz_trigger_info-->
    <!--SET-->
    <!--job_cron = #{jobCron},-->
    <!--job_desc = #{jobDesc},-->
    <!--update_time = NOW(),-->
    <!--author = #{author},-->
    <!--alarm_email = #{alarmEmail},-->
    <!--executor_route_strategy = #{executorRouteStrategy},-->
    <!--executor_handler = #{executorHandler},-->
    <!--executor_param = #{executorParam},-->
    <!--executor_block_strategy = #{executorBlockStrategy},-->
    <!--executor_timeout = ${executorTimeout},-->
    <!--executor_fail_retry_count = ${executorFailRetryCount},-->
    <!--glue_type = #{glueType},-->
    <!--glue_source = #{glueSource},-->
    <!--glue_remark = #{glueRemark},-->
    <!--glue_updatetime = #{glueUpdatetime},-->
    <!--child_jobid = #{childJobId}-->
    <!--WHERE id = #{id}-->
    <!--</update>-->

    <!--<delete id="delete" parameterType="java.util.HashMap">-->
    <!--DELETE-->
    <!--FROM job_qrtz_trigger_info-->
    <!--WHERE id = #{id}-->
    <!--</delete>-->

    <!--<select id="getJobsByGroup" parameterType="java.util.HashMap" resultMap="XxlJobInfo">-->
    <!--SELECT-->
    <!--<include refid="Base_Column_List"/>-->
    <!--FROM job_qrtz_trigger_info AS t-->
    <!--WHERE t.job_group = #{jobGroup}-->
    <!--</select>-->

    <!--<select id="findAllCount" resultType="int">-->
    <!--SELECT count(1)-->
    <!--FROM job_qrtz_trigger_info-->
    <!--</select>-->

</mapper>